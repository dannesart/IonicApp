"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9337],{9337:(W,A,s)=>{s.r(A),s.d(A,{profileModule:()=>G});var l=s(5861),h=s(4961),_=s(4853),x=s(591),C=s(6308),t=s(6353),o=s(9102);let v=(()=>{class n{constructor(e,r,i){var a=this;this.auth=e,this.userService=r,this.modalController=i,this.close=(0,l.Z)(function*(){a.modalController.dismiss({dismissed:!0})})}logOut(){var e=this;return(0,l.Z)(function*(){try{e.auth.logout()}catch{}})()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.e),t.Y36(h.f),t.Y36(o.IN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],decls:15,vars:0,consts:[["no-border","",1,"ion-no-border","p-6"],["color","primary"],["slot","end"],["fill","clear","color","tertiary",3,"click"],["fullscreen",""],["fixed","true"],[1,"ion-no-border","p-4"],["expand","full","size","large","shape","round","color","danger",1,"ion-activatable","ripple-parent",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"Settings"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return r.close()}),t._uU(6," Close "),t.qZA()()()(),t.TgZ(7,"ion-content",4)(8,"ion-grid",5),t._UZ(9,"ion-row"),t.qZA()(),t.TgZ(10,"ion-footer",6)(11,"ion-toolbar")(12,"ion-button",7),t.NdJ("click",function(){return r.logOut()}),t._uU(13,"Log out "),t._UZ(14,"ion-ripple-effect"),t.qZA()()())},dependencies:[o.YG,o.Sm,o.W2,o.fr,o.jY,o.Gu,o.H$,o.Nd,o.wd,o.sr],changeDetection:0}),n})();var b=s(2986),w=s(2593),u=s(6895);let T=(()=>{class n{constructor(e,r,i){var a=this;this.wallet=e,this.auth=r,this.modalController=i,this.accountNumber$=new x.X(null),this.accountName$=new x.X(null),this.close=(0,l.Z)(function*(){a.modalController.dismiss({dismissed:!0})}),this.updateAccountNumber=d=>{this.accountNumber$.next(d.value||d.target.value)},this.updateAccountName=d=>{this.accountName$.next(d.value||d.target.value)},this.addNewAccount=(0,l.Z)(function*(){try{const d=a.auth.getProfileStateAsObservable().pipe((0,b.q)(1)).subscribe(function(){var m=(0,l.Z)(function*({}){d.unsubscribe()});return function(p){return m.apply(this,arguments)}}())}catch{}})}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.X),t.Y36(C.e),t.Y36(o.IN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-external-account"]],decls:22,vars:14,consts:[["no-border","",1,"ion-no-border","py-6"],["color","dark"],["slot","end"],["fill","clear","color","tertiary",3,"click"],["fullscreen","true"],[3,"value","label","placeholder","id","type","valueChange"],["expand","full","size","large","shape","round",1,"ion-activatable","ripple-parent",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"Add new account"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return r.close()}),t._uU(6," Close "),t.qZA()()()(),t.TgZ(7,"ion-content",4)(8,"ion-grid")(9,"ion-row")(10,"ion-col")(11,"p-input",5),t.NdJ("valueChange",function(a){return r.updateAccountNumber(a)}),t.ALo(12,"async"),t.qZA()()(),t.TgZ(13,"ion-row")(14,"ion-col")(15,"p-input",5),t.NdJ("valueChange",function(a){return r.updateAccountName(a)}),t.ALo(16,"async"),t.qZA()()(),t.TgZ(17,"ion-row")(18,"ion-col")(19,"ion-button",6),t.NdJ("click",function(){return r.addNewAccount()}),t._uU(20,"Add "),t._UZ(21,"ion-ripple-effect"),t.qZA()()()()()),2&e&&(t.xp6(11),t.Q6J("value",t.lcZ(12,10,r.accountNumber$))("label","Account number")("placeholder","Account number")("id","accountnumber")("type","text"),t.xp6(4),t.Q6J("value",t.lcZ(16,12,r.accountName$))("label","Account name")("placeholder","Account name")("id","accountname")("type","text"))},dependencies:[o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.H$,o.Nd,o.wd,o.sr,w.a,u.Ov]}),n})();function N(n,c){if(1&n&&(t.TgZ(0,"ion-card",11)(1,"ion-card-header")(2,"ion-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-card-subtitle",12)(5,"ion-text",13)(6,"p"),t._uU(7),t.qZA()()()(),t.TgZ(8,"ion-card-content")(9,"ion-text")(10,"p"),t._uU(11),t.qZA()()()()),2&n){const e=c.$implicit;t.xp6(3),t.hij(" ",e.alias," "),t.xp6(4),t.Oqu(e.status),t.xp6(4),t.Oqu(e.iban)}}function Y(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,N,12,3,"ion-card",10),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e.externalAccounts)}}function E(n,c){1&n&&(t.TgZ(0,"ion-card",14)(1,"ion-card-content",15)(2,"ion-text",16),t._uU(3," No accounts "),t.qZA()(),t._UZ(4,"ion-ripple-effect"),t.qZA())}function k(n,c){if(1&n&&(t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col"),t.YNc(3,Y,2,1,"div",8),t.YNc(4,E,5,0,"ng-template",null,9,t.W1O),t.qZA()()()),2&n){const e=c.ngIf,r=t.MAs(5);t.xp6(3),t.Q6J("ngIf",e.externalAccounts&&e.externalAccounts.length)("ngIfElse",r)}}let M=(()=>{class n{constructor(e,r){var i=this;this.modalController=e,this.walletService=r,this.wallet$=this.walletService.getWallet$(),this.close=(0,l.Z)(function*(){yield i.reset(),i.modalController.dismiss({dismissed:!0})}),this.reset=(0,l.Z)(function*(){}),this.addNewAccunt=(0,l.Z)(function*(){return yield(yield i.modalController.create({component:T,cssClass:"new-external-account",swipeToClose:!0,showBackdrop:!0,initialBreakpoint:.5})).present()}),this.createIban=function(){var a=(0,l.Z)(function*(d){});return function(d){return a.apply(this,arguments)}}()}ngOnDestroy(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.IN),t.Y36(_.X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-external-accounts"]],decls:15,vars:4,consts:[["no-border","",1,"ion-no-border","p-6"],["color","dark"],["slot","end"],["fill","clear","color","tertiary",3,"click"],[3,"fullscreen"],[4,"ngIf"],[1,"ion-no-border","p-4"],["expand","full","size","large","shape","round",1,"ion-activatable","ripple-parent",3,"click"],[4,"ngIf","ngIfElse"],["noExternals",""],["class","shadow-none relative","color","light",4,"ngFor","ngForOf"],["color","light",1,"shadow-none","relative"],["color","success",1,"absolute","right-4","top-4"],["color","success"],["color","warning",1,"my-0","shadow-none"],[1,"text-4xl"],[1,"text-base","max-w-full","block"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"Your accounts"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return r.close()}),t._uU(6," Close "),t.qZA()()()(),t.TgZ(7,"ion-content",4),t.YNc(8,k,6,2,"ion-grid",5),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"ion-footer",6)(11,"ion-toolbar")(12,"ion-button",7),t.NdJ("click",function(){return r.addNewAccunt()}),t._uU(13,"Add account "),t._UZ(14,"ion-ripple-effect"),t.qZA()()()),2&e&&(t.xp6(7),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,2,r.wallet$)))},dependencies:[u.sg,u.O5,o.YG,o.Sm,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.wI,o.W2,o.fr,o.jY,o.Gu,o.H$,o.Nd,o.yW,o.wd,o.sr,u.Ov]}),n})();var O=s(30);function U(n,c){if(1&n&&(t.ynx(0),t._UZ(1,"iframe",6),t.ALo(2,"safe"),t.BQk()),2&n){const e=c.ngIf;t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.url),t.uOi)}}let I=(()=>{class n{constructor(e,r){var i=this;this.modalController=e,this.user=r,this.source$=this.user.kyc$,this.close=(0,l.Z)(function*(){i.modalController.dismiss({dismissed:!0})})}ngOnDestroy(){}ngOnInit(){var e=this;return(0,l.Z)(function*(){yield e.user.getKYCUrl()})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.IN),t.Y36(h.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-kyc"]],decls:10,vars:4,consts:[["no-border","",1,"ion-no-border","p-6"],["color","dark"],["slot","end"],["fill","clear","color","tertiary",3,"click"],[3,"fullscreen"],[4,"ngIf"],[1,"w-full","h-full",3,"src"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"Update information"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return r.close()}),t._uU(6," Close "),t.qZA()()()(),t.TgZ(7,"ion-content",4),t.YNc(8,U,3,3,"ng-container",5),t.ALo(9,"async"),t.qZA()),2&e&&(t.xp6(7),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,2,r.source$)))},dependencies:[u.O5,o.YG,o.Sm,o.W2,o.Gu,o.wd,o.sr,u.Ov,O.y]}),n})();var Z=s(5586);function S(n,c){1&n&&(t.ynx(0),t._UZ(1,"ion-icon",24),t.BQk())}function J(n,c){1&n&&t._UZ(0,"ion-spinner",25)}const P=function(){return{"mx-auto":!0}};function $(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-grid")(1,"ion-row",5)(2,"ion-col",6)(3,"ion-avatar",7),t._UZ(4,"img",8),t.qZA()()(),t.TgZ(5,"ion-row",9)(6,"ion-col")(7,"ion-text",10)(8,"h2"),t._uU(9),t.qZA()(),t.TgZ(10,"ion-text",11)(11,"h3",12),t._uU(12),t.qZA()()()(),t.TgZ(13,"ion-row",13)(14,"ion-col",14)(15,"ion-card",15)(16,"ion-card-content",16)(17,"span",17),t._uU(18,"Connected phonenumber"),t.qZA(),t._uU(19),t.qZA()()(),t.TgZ(20,"ion-col",14)(21,"ion-card",18),t.NdJ("click",function(){const a=t.CHM(e).ngIf,d=t.oxw();return t.KtG(d.presentKYCModal(a))}),t.TgZ(22,"ion-card-content",19),t.YNc(23,S,2,0,"ng-container",20),t.ALo(24,"async"),t.YNc(25,J,1,0,"ng-template",null,21,t.W1O),t.TgZ(27,"ion-text",22),t._uU(28," Fix KYC "),t.qZA()(),t._UZ(29,"ion-ripple-effect"),t.qZA()(),t.TgZ(30,"ion-col",14)(31,"ion-card",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.logout())}),t.TgZ(32,"ion-card-content",16),t._uU(33," Log out "),t.qZA()()()()()}if(2&n){const e=c.ngIf,r=t.MAs(26),i=t.oxw();t.xp6(3),t.Q6J("ngClass",t.DdM(10,P)),t.xp6(1),t.Q6J("src","/assets/images/polar-bear-avatar.jpeg",t.LSH),t.xp6(5),t.AsE("",e.firstName||"Anon","",e.lastName,""),t.xp6(3),t.Oqu(e.id),t.xp6(7),t.hij(" ",e.mobilePhone," "),t.xp6(4),t.Q6J("ngIf",!t.lcZ(24,8,i.updatingKYC$))("ngIfElse",r)}}const q=[{path:"",component:(()=>{class n{constructor(e,r,i,a,d,m){var p=this;this.auth=e,this.modalController=r,this.routerOutlet=i,this.walletService=a,this.userService=d,this.route=m,this.profile$=this.userService.user$,this.wallet$=this.walletService.getWallet$(),this.updatingKYC$=new x.X(!1),this.topUp=(0,l.Z)(function*(){try{yield p.walletService.cashIn("0.01"),yield p.walletService.triggerFetch()}catch(g){console.log(g)}}),this.presentSettingsModal=(0,l.Z)(function*(){return yield(yield p.modalController.create({component:v,cssClass:"settings",swipeToClose:!0,showBackdrop:!0,presentingElement:p.routerOutlet.nativeEl})).present()}),this.presentExternalAccountsModal=(0,l.Z)(function*(){return yield(yield p.modalController.create({component:M,cssClass:"external-accounts",swipeToClose:!0,showBackdrop:!0,presentingElement:p.routerOutlet.nativeEl})).present()}),this.presentKYCModal=function(){var f=(0,l.Z)(function*(g){return yield(yield p.modalController.create({component:I,cssClass:"kyc",swipeToClose:!0,showBackdrop:!0,presentingElement:p.routerOutlet.nativeEl})).present()});return function(g){return f.apply(this,arguments)}}(),this.logout=(0,l.Z)(function*(){yield p.auth.logout()})}ngOnInit(){var e=this;return(0,l.Z)(function*(){e.queryParams$=e.route.queryParams.subscribe(r=>{r&&r.action&&"openAccounts"===r.action&&e.presentExternalAccountsModal()})})()}ngOnDestroy(){this.queryParams$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.e),t.Y36(o.IN),t.Y36(o.jP),t.Y36(_.X),t.Y36(h.f),t.Y36(Z.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:8,vars:4,consts:[["no-border","",1,"ion-no-border","p-2.5"],["color","dark",1,"ion-text-center"],[3,"fullscreen"],[1,"absolute","inset-0","top-16","text-center","safe-space-m"],[4,"ngIf"],[1,"mb-4"],["align-self-center","","size-xs","12"],[1,"border-tertiary-shade","overflow-hidden","bg-tertiary-default","border-2","w-14","h-14",3,"ngClass"],[1,"object-cover","scale-125",3,"src"],[1,"mb-8"],["color","medium"],["color","tertiary"],[1,"mt-2","text-xs"],[1,"gap-4"],["size-xs","12"],["button","","color","light",1,"my-0","shadow-none"],[1,"text-2xl"],[1,"mb-2","block","text-sm"],["button","","color","warning",1,"my-0","text-warning-shade","rounded-3xl","shadow-lg",3,"click"],[1,"text-4xl"],[4,"ngIf","ngIfElse"],["updatingKYC",""],[1,"text-base","max-w-full","block"],["button","","color","light",1,"my-0","shadow-none",3,"click"],["name","alert-circle-outline"],["name","crescent","color","danger"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3," Settings "),t.qZA()()(),t.TgZ(4,"ion-content",2)(5,"section",3),t.YNc(6,$,34,11,"ion-grid",4),t.ALo(7,"async"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,2,r.profile$)))},dependencies:[u.mk,u.O5,o.BJ,o.PM,o.FN,o.wI,o.W2,o.jY,o.Gu,o.gu,o.H$,o.Nd,o.PQ,o.yW,o.wd,o.sr,u.Ov],styles:["[_ngcontent-%COMP%]:root{--backdrop-opacity: 1}.round-button[_ngcontent-%COMP%]{--padding-end: 8px;--padding-start: 8px}.loader-container[_ngcontent-%COMP%]{z-index:100;position:absolute;inset:0;display:flex;align-items:center;justify-content:center}ion-avatar[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast);width:100px;height:100px}ion-item[_ngcontent-%COMP%]{--ion-safe-area-left: 0;--padding-start: 0}"]}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Z.Bz.forChild(q),Z.Bz]}),n})(),K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,o.Pc]}),n})();var y=s(6530),j=s(7273);let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,o.Pc,j.g]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,o.Pc,y.A,B]}),n})(),z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,o.Pc,y.A]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,F,o.Pc,K,Q,z]}),n})()}}]);