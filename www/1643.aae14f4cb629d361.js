"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1643],{1643:(q,v,d)=>{d.r(v),d.d(v,{ContactsModule:()=>G});var w=d(9180),o=d(9102),p=d(5861),T=d(6528),A=d(4359),h=d(6308),g=d(4961),t=d(6353),x=d(2593);let k=(()=>{class e{constructor(n,r,l,c){var a=this;this.user=n,this.auth=r,this.modalController=l,this.toastController=c,this.close=(0,p.Z)(function*(){a.modalController.dismiss({dismissed:!0})}),this.onChange=(i,s)=>{switch(i){case"mobileNumber":this.mobileNumber=s.value||s;break;case"firstName":this.firstName=s.value||s;break;case"lastName":this.lastName=s.value||s}},this.showError=function(){var i=(0,p.Z)(function*(s){(yield a.toastController.create({message:s,color:"danger",duration:4e3,position:"top"})).present()});return function(s){return i.apply(this,arguments)}}(),this.saveContactOnClick=(0,p.Z)(function*(){try{a.saveContact(a.firstName,a.lastName,a.mobileNumber),a.close()}catch{a.showError("An undefined error happend. Please try again.")}})}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.f),t.Y36(h.e),t.Y36(o.IN),t.Y36(o.yF))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ui-edit-contact"]],inputs:{mobileNumber:"mobileNumber",firstName:"firstName",lastName:"lastName",saveContact:"saveContact"},decls:23,vars:16,consts:[["no-border","",1,"ion-no-border","p-2.5"],["color","dark"],["slot","end"],["fill","clear","color","tertiary",3,"click"],["fullscreen","true"],[1,"h-full","p-8"],[3,"value","label","placeholder","disabled","id","type"],[3,"value","label","placeholder","id","type","valueChange"],["expand","block",1,"ion-activatable","ripple-parent","w-full","text-lg","m-0","mt-8",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"Edit contact"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return r.close()}),t._uU(6," Close "),t.qZA()()()(),t.TgZ(7,"ion-content",4)(8,"ion-grid",5)(9,"ion-row")(10,"ion-col"),t._UZ(11,"p-input",6),t.qZA()(),t.TgZ(12,"ion-row")(13,"ion-col")(14,"p-input",7),t.NdJ("valueChange",function(c){return r.onChange("firstName",c)}),t.qZA()()(),t.TgZ(15,"ion-row")(16,"ion-col")(17,"p-input",7),t.NdJ("valueChange",function(c){return r.onChange("lastName",c)}),t.qZA()()(),t.TgZ(18,"ion-row")(19,"ion-col")(20,"ion-button",8),t.NdJ("click",function(){return r.saveContactOnClick()}),t._uU(21,"Save "),t._UZ(22,"ion-ripple-effect"),t.qZA()()()()()),2&n&&(t.xp6(11),t.Q6J("value",r.mobileNumber)("label","Phone number")("placeholder","+xx xx xxxxxxx")("disabled",!0)("id","phonenumber")("type","text"),t.xp6(3),t.Q6J("value",r.firstName)("label","First name")("placeholder","Name")("id","firstName")("type","text"),t.xp6(3),t.Q6J("value",r.lastName)("label","Last name")("placeholder","Name")("id","lastName")("type","text"))},dependencies:[o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.H$,o.Nd,o.wd,o.sr,x.a]}),e})();var N=d(591);let J=(()=>{class e{constructor(n,r,l,c){var a=this;this.user=n,this.auth=r,this.modalController=l,this.toastController=c,this.phoneNumber$=new N.X(null),this.country$=new N.X(null),this.close=(0,p.Z)(function*(){a.modalController.dismiss({dismissed:!0})}),this.updateCountry=i=>{this.country$.next(i.value||i)},this.updatePhoneNumber=i=>{this.phoneNumber$.next(i.value||i.target.value)},this.showError=function(){var i=(0,p.Z)(function*(s){(yield a.toastController.create({message:s,color:"danger",duration:4e3,position:"top"})).present()});return function(s){return i.apply(this,arguments)}}(),this.addNewContact=(0,p.Z)(function*(){try{const i=yield a.user.getRecipientBasedOnPhone(a.phoneNumber$.value);i?(a.user.saveNewContact({mobilePhone:i.mobilePhone,firstName:i.firstName||"",lastName:i.lastName||"",country:a.country$.value}),a.close()):a.showError("No user found")}catch{a.showError("An undefined error happend. Please try again.")}})}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.f),t.Y36(h.e),t.Y36(o.IN),t.Y36(o.yF))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ui-new-contact"]],decls:17,vars:4,consts:[["no-border","",1,"ion-no-border","p-2.5"],["color","dark"],["slot","end"],["fill","clear","color","tertiary",3,"click"],["fullscreen","true"],[1,"h-full","p-8"],[3,"label","placeholder","id","type","valueChange","countryChange"],["expand","block",1,"ion-activatable","ripple-parent","w-full","text-lg","m-0","mt-8",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"Add new contact"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return r.close()}),t._uU(6," Close "),t.qZA()()()(),t.TgZ(7,"ion-content",4)(8,"ion-grid",5)(9,"ion-row")(10,"ion-col")(11,"p-input",6),t.NdJ("valueChange",function(c){return r.updatePhoneNumber(c)})("countryChange",function(c){return r.updateCountry(c)}),t.qZA()()(),t.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-button",7),t.NdJ("click",function(){return r.addNewContact()}),t._uU(15,"Add "),t._UZ(16,"ion-ripple-effect"),t.qZA()()()()()),2&n&&(t.xp6(11),t.Q6J("label","Phone number")("placeholder","+ccxxxxxxxxx")("id","phonenumber")("type","phone"))},dependencies:[o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.H$,o.Nd,o.wd,o.sr,x.a]}),e})();var _=d(5586),m=d(6895),f=d(4719);let M=(()=>{class e{transform(n,r,l){const c=r.split("||");return l?n.filter(a=>{let i=!1;return c.forEach(s=>{a[s].toLowerCase().indexOf(l.toLowerCase())>-1&&(i=!0)}),i}):n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"filter",type:e,pure:!1}),e})();function E(e,u){if(1&e){const n=t.EpF();t.TgZ(0,"div",17)(1,"div",18),t._uU(2,"NA"),t.qZA(),t.TgZ(3,"div",19),t.NdJ("click",function(){const l=t.CHM(n),c=l.$implicit,a=l.index,i=t.oxw(3);return t.KtG(i.editContact(c.firstName,c.lastName,c.mobilePhone,a))}),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.qZA()(),t.TgZ(8,"div",21)(9,"ion-icon",22),t.NdJ("click",function(){const l=t.CHM(n),c=l.$implicit,a=l.index,i=t.oxw(3);return t.KtG(i.toggleFavorite(c,a))}),t.qZA(),t.TgZ(10,"ion-icon",22),t.NdJ("click",function(){const l=t.CHM(n),c=l.$implicit,a=l.index,i=t.oxw(3);return t.KtG(i.remove(c,a))}),t.qZA()()()}if(2&e){const n=u.$implicit;t.xp6(5),t.AsE("",n.firstName||"Anon"," ",n.lastName,""),t.xp6(2),t.Oqu(n.mobilePhone),t.xp6(2),t.Q6J("name",n.favorite?"star":"star-outline"),t.xp6(1),t.Q6J("name","remove-circle-outline")}}function F(e,u){if(1&e&&(t.ynx(0),t.YNc(1,E,11,5,"div",16),t.ALo(2,"filter"),t.BQk()),2&e){const n=t.oxw().ngIf,r=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,1,n,"firstName||mobilePhone||lastName",r.searchQuery))}}function Y(e,u){1&e&&(t.TgZ(0,"div",23)(1,"div",24)(2,"p"),t._uU(3,"No contacts"),t.qZA()()())}function P(e,u){if(1&e&&(t.TgZ(0,"div",13),t.YNc(1,F,3,5,"ng-container",14),t.YNc(2,Y,4,0,"ng-template",null,15,t.W1O),t.qZA()),2&e){const n=u.ngIf,r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.length)("ngIfElse",r)}}const U=[{path:"",component:(()=>{class e{constructor(n,r,l,c){var a=this;this.user=n,this.auth=r,this.router=l,this.modalController=c,this.fancyAnimation=A.ci,this.goBack=()=>{this.router.navigateByUrl(T.H5.wallet)},this.addNewContact=(0,p.Z)(function*(){return yield(yield a.modalController.create({component:J,cssClass:"new-contact",swipeToClose:!0,showBackdrop:!0,initialBreakpoint:.5})).present()}),this.editContact=function(){var i=(0,p.Z)(function*(s,C,y,Z){return yield(yield a.modalController.create({component:k,cssClass:"edit-contact",swipeToClose:!0,showBackdrop:!0,initialBreakpoint:.8,componentProps:{firstName:s,lastName:C,mobileNumber:y,saveContact:(R,S,L)=>{a.user.updateContact(Z,R,S)}}})).present()});return function(s,C,y,Z){return i.apply(this,arguments)}}(),this.doRefresh=i=>{i.target.complete()},this.toggleFavorite=(i,s)=>{this.user.toggleFavorite(s)},this.remove=(i,s)=>{this.user.removeContact(s)}}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.f),t.Y36(h.e),t.Y36(_.F0),t.Y36(o.IN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["route-contacts"]],decls:17,vars:5,consts:[["no-border","",1,"ion-no-border","p-2.5"],["slot","start"],[1,"text-xs",3,"click"],["name","arrow-back-outline",1,"text-black"],["color","dark",1,"ion-text-center","text-base","text-black"],["slot","end"],[1,"text-black","text-xs",3,"click"],["name","add-outline",1,"text-black"],[3,"fullscreen"],[1,"flex-1","px-8","py-4"],["slot","fixed",3,"ionRefresh"],["type","text","placeholder","Enter name or phone number",1,"rounded-lg","bg-light-default","p-3","mb-4","w-full",3,"ngModel","ngModelChange"],["class","flex gap-1 flex-col",4,"ngIf"],[1,"flex","gap-1","flex-col"],[4,"ngIf","ngIfElse"],["noContacts",""],["class","p-4 rounded-3xl shadow-lg bg-white flex gap-3 justify-between",4,"ngFor","ngForOf"],[1,"p-4","rounded-3xl","shadow-lg","bg-white","flex","gap-3","justify-between"],[1,"w-8","h-8","rounded-full","self-center","text-center"],[1,"text-2xl",3,"click"],[1,"text-sm","text-dark-default","block"],[1,"flex","flex-col","gap-3","py-2"],[1,"w-6","h-6",3,"name","click"],[1,"p-4","px-8","rounded-3xl","shadow-lg","bg-white","flex","gap-1","justify-between"],[1,"text-lg"]],template:function(n,r){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return r.goBack()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title",4),t._uU(6," Contacts "),t.qZA(),t.TgZ(7,"ion-buttons",5)(8,"ion-button",6),t.NdJ("click",function(){return r.addNewContact()}),t._UZ(9,"ion-icon",7),t.qZA()()()(),t.TgZ(10,"ion-content",8)(11,"section",9)(12,"ion-refresher",10),t.NdJ("ionRefresh",function(c){return r.doRefresh(c)}),t._UZ(13,"ion-refresher-content"),t.qZA(),t.TgZ(14,"input",11),t.NdJ("ngModelChange",function(c){return r.searchQuery=c}),t.qZA(),t.YNc(15,P,4,2,"div",12),t.ALo(16,"async"),t.qZA()()),2&n&&(t.xp6(10),t.Q6J("fullscreen",!0),t.xp6(4),t.Q6J("ngModel",r.searchQuery),t.xp6(1),t.Q6J("ngIf",t.lcZ(16,3,r.user.contacts$)))},dependencies:[m.sg,m.O5,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.nJ,o.Wo,o.wd,o.sr,f.Fj,f.JJ,f.On,m.Ov,M],styles:["[_ngcontent-%COMP%]:root{--backdrop-opacity: 1}ion-fab[_ngcontent-%COMP%]{bottom:120px}"]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(U),_.Bz]}),e})();var I=d(7999),O=d(20),b=d(7273);let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,o.Pc,b.g]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,o.Pc,b.g]}),e})();var $=d(6530);let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,B,o.Pc,w._,I.h,O.u,Q,j,$.A,f.u5]}),e})()}}]);